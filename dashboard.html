<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hotel Dashboard | StayNest</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins',sans-serif; }
  body { background:#f7f5fc; color:#333; padding:20px; }

  h1 { color:#6a0dad; text-align:center; margin-bottom:25px; }

  .hotel-selector { text-align:center; margin-bottom:25px; }
  .hotel-selector select { padding:8px 12px; border-radius:8px; border:1.5px solid #6a0dad; outline:none; }

  .cards { display:flex; justify-content:space-around; flex-wrap:wrap; margin-bottom:30px; }
  .card { background:#fff; border-radius:15px; padding:25px; box-shadow:0 5px 15px rgba(0,0,0,0.1); width:230px; text-align:center; transition:.3s; }
  .card:hover { transform:translateY(-5px); }
  .card i { font-size:35px; color:#6a0dad; margin-bottom:10px; }

  .chart-container, .table-container { background:#fff; padding:20px; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,0.1); margin-bottom:30px; }

  .table-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; }
  .table-header input, .table-header select { padding:8px 10px; border-radius:8px; border:1.5px solid #6a0dad; outline:none; }
  button { background:#6a0dad; color:white; border:none; padding:8px 14px; border-radius:6px; cursor:pointer; transition:.3s; }
  button:hover { background:#9b30ff; }

  table { width:100%; border-collapse:collapse; margin-top:10px; }
  th, td { padding:12px; text-align:center; border-bottom:1px solid #eee; }
  th { background:#6a0dad; color:#fff; }
  tr:hover { background:#f2e8ff; }
  .actions button { margin:0 5px; }

  .modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.4); display:none; justify-content:center; align-items:center; }
  .modal-content { background:#fff; padding:25px; border-radius:10px; width:350px; }
  .modal-content h3 { color:#6a0dad; text-align:center; margin-bottom:15px; }
  .modal-content input, .modal-content select { width:100%; margin:8px 0; padding:8px; border-radius:8px; border:1.5px solid #6a0dad; }
  .modal-content .btns { text-align:right; margin-top:10px; }
</style>
</head>
<body>

<h1>üè® StayNest Dashboard</h1>

<div class="hotel-selector">
  <label for="hotelSelect">Select Hotel: </label>
  <select id="hotelSelect"></select>
  <button onclick="addHotel()">+ Add Hotel</button>
</div>

<div class="cards" id="hotelCards"></div>

<div class="chart-container">
  <h3 style="text-align:center; color:#6a0dad;">Monthly Revenue Chart</h3>
  <canvas id="revenueChart"></canvas>
</div>

<div class="table-container">
  <div class="table-header">
    <div>
      <input type="text" id="searchInput" placeholder="Search by type or status">
      <select id="filterStatus">
        <option value="">Filter by Status</option>
        <option value="Available">Available</option>
        <option value="Booked">Booked</option>
      </select>
    </div>
    <button onclick="openModal()">+ Add Room</button>
  </div>

  <table id="roomTable">
    <thead>
      <tr>
        <th>ID</th>
        <th>Room Type</th>
        <th>Price</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- Modal -->
<div class="modal" id="roomModal">
  <div class="modal-content">
    <h3 id="modalTitle">Add Room</h3>
    <input type="text" id="roomType" placeholder="Room Type">
    <input type="number" id="roomPrice" placeholder="Room Price">
    <select id="roomStatus">
      <option value="">Select Status</option>
      <option value="Available">Available</option>
      <option value="Booked">Booked</option>
    </select>
    <div class="btns">
      <button onclick="saveRoom()">Save</button>
      <button onclick="closeModal()">Cancel</button>
    </div>
  </div>
</div>

<script>
let hotels = [
  { 
    id: 1, name: 'StayNest Central', rooms: [
      { id: 1, type: 'Deluxe Suite', price: 5000, status: 'Available' },
      { id: 2, type: 'Family Room', price: 3500, status: 'Booked' },
      { id: 3, type: 'Single Room', price: 2500, status: 'Available' }
    ],
    revenue: [150000, 175000, 180000, 220000, 200000, 240000]
  },
  { 
    id: 2, name: 'StayNest Ocean View', rooms: [
      { id: 4, type: 'Ocean Suite', price: 8000, status: 'Available' },
      { id: 5, type: 'Double Room', price: 4000, status: 'Booked' }
    ],
    revenue: [180000, 200000, 190000, 210000, 220000, 230000]
  }
];

let currentHotelId = hotels[0].id;
let editId = null;
let revenueChart;

function populateHotelSelect() {
  const select = document.getElementById('hotelSelect');
  select.innerHTML = '';
  hotels.forEach(h => {
    const option = document.createElement('option');
    option.value = h.id;
    option.textContent = h.name;
    select.appendChild(option);
  });
  select.value = currentHotelId;
}
populateHotelSelect();

document.getElementById('hotelSelect').addEventListener('change', e => {
  currentHotelId = parseInt(e.target.value);
  renderDashboard();
});

function addHotel() {
  const name = prompt('Enter hotel name:');
  if(!name) return;
  const newHotel = { id: Date.now(), name, rooms: [], revenue: [0,0,0,0,0,0] };
  hotels.push(newHotel);
  currentHotelId = newHotel.id;
  populateHotelSelect();
  renderDashboard();
}

function renderCards() {
  const hotel = hotels.find(h => h.id === currentHotelId);
  const cardsDiv = document.getElementById('hotelCards');
  cardsDiv.innerHTML = `
    <div class="card">
      <i class="fas fa-bed"></i>
      <h3>${hotel.rooms.length}</h3>
      <p>Total Rooms</p>
    </div>
    <div class="card">
      <i class="fas fa-user-check"></i>
      <h3>${hotel.rooms.filter(r => r.status==='Booked').length}</h3>
      <p>Booked Rooms</p>
    </div>
    <div class="card">
      <i class="fas fa-dollar-sign"></i>
      <h3>‚Çπ${hotel.revenue.reduce((a,b)=>a+b,0)}</h3>
      <p>Monthly Revenue</p>
    </div>
  `;
}

function renderChart() {
  const hotel = hotels.find(h => h.id === currentHotelId);
  const ctx = document.getElementById('revenueChart');
  if(revenueChart) revenueChart.destroy();
  revenueChart = new Chart(ctx, {
    type:'line',
    data: {
      labels:['Jan','Feb','Mar','Apr','May','Jun'],
      datasets:[{
        label:'Revenue (‚Çπ)',
        data: hotel.revenue,
        borderColor:'#6a0dad',
        backgroundColor:'rgba(106,13,173,0.2)',
        borderWidth:2, fill:true, tension:0.4
      }]
    },
    options: { plugins:{legend:{display:true}}, scales:{y:{beginAtZero:true}} }
  });
}

function renderTable() {
  const hotel = hotels.find(h => h.id === currentHotelId);
  const tbody = document.querySelector('#roomTable tbody');
  tbody.innerHTML = '';
  const search = document.getElementById('searchInput').value.toLowerCase();
  const filter = document.getElementById('filterStatus').value;

  const filtered = hotel.rooms.filter(r => 
    (r.type.toLowerCase().includes(search) || r.status.toLowerCase().includes(search)) &&
    (filter===''||r.status===filter)
  );

  filtered.forEach(room => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${room.id}</td>
      <td>${room.type}</td>
      <td>‚Çπ${room.price}</td>
      <td>${room.status}</td>
      <td class="actions">
        <button onclick="editRoom(${room.id})">Edit</button>
        <button onclick="deleteRoom(${room.id})" style="background:#dc2626;">Delete</button>
      </td>`;
    tbody.appendChild(tr);
  });
}

function renderDashboard() {
  renderCards();
  renderChart();
  renderTable();
}

function openModal() {
  document.getElementById('roomModal').style.display='flex';
  document.getElementById('modalTitle').textContent='Add Room';
  document.getElementById('roomType').value='';
  document.getElementById('roomPrice').value='';
  document.getElementById('roomStatus').value='';
  editId=null;
}

function closeModal() { document.getElementById('roomModal').style.display='none'; }

function saveRoom() {
  const type=document.getElementById('roomType').value.trim();
  const price=document.getElementById('roomPrice').value.trim();
  const status=document.getElementById('roomStatus').value;
  if(!type||!price||!status){ alert('Please fill all fields!'); return; }

  const hotel = hotels.find(h=>h.id===currentHotelId);

  if(editId){
    const room = hotel.rooms.find(r=>r.id===editId);
    room.type=type; room.price=price; room.status=status;
    alert('Room updated successfully!');
  }else{
    hotel.rooms.push({id:Date.now(), type, price, status});
    alert('Room added successfully!');
  }
  closeModal(); renderDashboard();
}

function editRoom(id){
  const hotel = hotels.find(h=>h.id===currentHotelId);
  const room = hotel.rooms.find(r=>r.id===id);
  editId=id;
  document.getElementById('modalTitle').textContent='Edit Room';
  document.getElementById('roomType').value=room.type;
  document.getElementById('roomPrice').value=room.price;
  document.getElementById('roomStatus').value=room.status;
  document.getElementById('roomModal').style.display='flex';
}

function deleteRoom(id){
  if(confirm('Are you sure you want to delete this room?')){
    const hotel = hotels.find(h=>h.id===currentHotelId);
    hotel.rooms = hotel.rooms.filter(r=>r.id!==id);
    renderDashboard();
  }
}

document.getElementById('searchInput').addEventListener('input',renderTable);
document.getElementById('filterStatus').addEventListener('change',renderTable);

window.onload=renderDashboard;
</script>

</body>
</html>
